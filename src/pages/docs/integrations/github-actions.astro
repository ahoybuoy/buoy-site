---
import DocsLayout from '../../../layouts/DocsLayout.astro'
import LeadMagnetCallout from '../../../components/LeadMagnetCallout.astro'
---

<DocsLayout title="GitHub App" description="Automatic design drift detection on every PR">
  <h1>Buoy GitHub App</h1>

  <p>
    The Buoy GitHub App runs the same open-source scanner on every pull request automatically.
    It posts a review with a deterministic issues table, and on Pro tier adds AI-powered summaries
    and committable inline fix suggestions.
  </p>

  <h2>Quick Setup</h2>

  <ol>
    <li>Install the <a href="https://github.com/marketplace/buoy-design">Buoy GitHub App</a> from the GitHub Marketplace</li>
    <li>Select the repositories you want to monitor</li>
    <li>Open a PR &mdash; Buoy scans automatically and posts a review</li>
  </ol>

  <p>That's it. No workflow files, no configuration, no API keys needed.</p>

  <h2>How It Works</h2>

  <p>
    The GitHub App runs the same <code>@buoy-design/scanners</code> and <code>@buoy-design/core</code>
    engine that powers the CLI. When a PR is opened or updated:
  </p>

  <ol>
    <li>Buoy scans the changed files for design drift</li>
    <li>Posts a GitHub PR review with a summary and issues table</li>
    <li>On Pro tier, adds AI-powered summaries and committable inline fix suggestions</li>
    <li>Creates a check run (pass/fail) based on configured thresholds</li>
  </ol>

  <h2>PR Review Format</h2>

  <p>The PR review includes:</p>

  <pre><code>## ðŸ›Ÿ Buoy Design Review

### Summary
3 design drift issues found in this PR.

&lt;details&gt;
&lt;summary&gt;Issues Table&lt;/summary&gt;

| File | Line | Issue | Fix |
|------|------|-------|-----|
| Card.tsx | 12 | Hardcoded color #3b82f6 | var(--color-primary) |
| Card.tsx | 31 | Hardcoded spacing 24px | var(--spacing-lg) |
| Modal.tsx | 8 | Hardcoded radius 8px | var(--radius-md) |

&lt;/details&gt;</code></pre>

  <p>On Pro tier, you also get committable inline suggestions that you can apply with one click in the GitHub UI.</p>

  <h2>Two Modes</h2>

  <h3>Established Mode (Maturity &ge;50)</h3>
  <p>For teams with mature design systems. Enforcement tone with a summary and detailed issues table.</p>

  <h3>Builder Mode (Maturity &lt;50)</h3>
  <p>For teams early in their design system journey. Coaching tone that identifies repeated patterns
  and helps you build tokens. "You're using this blue in 4 places &mdash; that's your primary."</p>

  <h2>Free vs Pro Tier</h2>

  <ul>
    <li><strong>Free:</strong> Deterministic issues table (file, line, issue, fix token). GitHub check run (pass/fail).</li>
    <li><strong>Pro:</strong> Everything in Free, plus AI-powered summaries, committable inline fix suggestions, coaching in builder mode, and custom review instructions.</li>
  </ul>

  <h2>Dashboard</h2>

  <p>
    The GitHub App includes access to the <a href="https://app.buoy.design">Buoy Dashboard</a> at app.buoy.design:
  </p>

  <ul>
    <li>Repository list with health scores (0-100%, color-coded)</li>
    <li>Per-repo view: issues, design graph (tokens + components)</li>
    <li>Settings: enable/disable checks, set severity, configure ignored paths</li>
    <li>Scan history and drift trends over time</li>
  </ul>

  <h2>Configuration</h2>

  <p>
    You can configure Buoy's behavior via the dashboard or a <code>.buoy.yaml</code> file in your repo:
  </p>

  <pre><code># .buoy.yaml
checks:
  hardcoded-color: error
  hardcoded-spacing: warning
  arbitrary-tailwind: error
  inline-style: warning

ignore:
  - "**/*.test.tsx"
  - "src/legacy/**"</code></pre>

  <h2>CLI Authentication</h2>

  <p>
    To manage your Buoy Cloud account from the CLI, use <code>buoy ahoy</code>:
  </p>

  <pre><code>buoy ahoy login      # Authenticate with Buoy Cloud
buoy ahoy status     # Check account and connection status
buoy ahoy github     # Connect GitHub from the CLI</code></pre>

  <p>See <a href="/docs/cli/ahoy">buoy ahoy</a> for the full command reference.</p>

  <h2>Related</h2>

  <ul>
    <li><a href="/docs/cli/drift">buoy drift</a> &mdash; CLI drift detection commands</li>
    <li><a href="/docs/configuration">Configuration</a> &mdash; .buoy.yaml options</li>
    <li><a href="/docs/features/health-scoring">Health Scoring</a> &mdash; How scores work</li>
  </ul>

  <div class="mt-12">
    <LeadMagnetCallout
      leadMagnet="pr-review-cheatsheet"
      headline="Want a quick reference for PR reviews?"
      subhead="What to look for in design system PRs. Print it, share it with your team."
      buttonText="Get the Cheat Sheet"
    />
  </div>
</DocsLayout>
