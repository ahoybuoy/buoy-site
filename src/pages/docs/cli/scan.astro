---
import DocsLayout from '../../../layouts/DocsLayout.astro'
---

<DocsLayout title="buoy scan" description="Scan your codebase for design system usage">
  <h1>buoy scan</h1>

  <p>
    Scan your codebase for design system usage. Zero-config auto-detection finds
    components, tokens, and patterns. Results are cached for fast repeat runs.
  </p>

  <h2>Usage</h2>

  <pre><code>buoy scan [options]</code></pre>

  <h2>Options</h2>

  <table>
    <thead>
      <tr>
        <th>Option</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>-s, --source &lt;path&gt;</code></td>
        <td>Source directory to scan (default: auto-detected)</td>
      </tr>
      <tr>
        <td><code>--json</code></td>
        <td>Output as JSON for scripting</td>
      </tr>
      <tr>
        <td><code>-v, --verbose</code></td>
        <td>Show detailed scan progress and per-file results</td>
      </tr>
      <tr>
        <td><code>--no-persist</code></td>
        <td>Don't save results to scan history</td>
      </tr>
      <tr>
        <td><code>--no-cache</code></td>
        <td>Bypass cache and force a full re-scan</td>
      </tr>
      <tr>
        <td><code>--clear-cache</code></td>
        <td>Clear the scan cache before running</td>
      </tr>
    </tbody>
  </table>

  <h2>Examples</h2>

  <h3>Basic scan</h3>

  <pre><code>$ buoy scan

Scanning project...

Auto-detected:
  Framework: React
  Styling: Tailwind CSS
  Source: src/

Scanned 84 files in 1.2s

Results
───────
Components: 42 detected
Tokens: 67 resolved
Drift signals: 23
Health score: 72/100

Cache: saved to .buoy/cache.json (next scan will be faster)</code></pre>

  <h3>Scan a specific directory</h3>

  <pre><code>$ buoy scan -s packages/ui/src

Scanning packages/ui/src...

Scanned 28 files in 0.6s

Results
───────
Components: 15 detected
Tokens: 34 resolved
Drift signals: 8
Health score: 81/100</code></pre>

  <h3>Verbose output</h3>

  <pre><code>$ buoy scan -v

Scanning project...

Auto-detected:
  Framework: React
  Styling: Tailwind CSS
  Source: src/

  ✓ src/components/Button.tsx      8 tokens, 0 drift
  ✓ src/components/Card.tsx        6 tokens, 2 drift
  ✓ src/components/Badge.tsx       4 tokens, 1 drift
  ✓ src/components/Modal.tsx       5 tokens, 0 drift
  ...80 more files

Scanned 84 files in 1.4s

Results
───────
Components: 42 detected
Tokens: 67 resolved
Drift signals: 23
Health score: 72/100

Cache stats:
  Hits: 0 (first scan)
  Size: 142 KB</code></pre>

  <h3>Skip cache</h3>

  <pre><code>$ buoy scan --no-cache

Bypassing cache, running full scan...

Scanned 84 files in 1.2s
(cached scan would have taken 0.3s)</code></pre>

  <h3>JSON output</h3>

  <pre><code>$ buoy scan --json

&#123;
  "files": 84,
  "duration": 1.2,
  "components": 42,
  "tokens": 67,
  "driftSignals": 23,
  "healthScore": 72,
  "cache": &#123;
    "hits": 71,
    "misses": 13,
    "size": "142 KB"
  &#125;
&#125;</code></pre>

  <h2>Auto-detection</h2>

  <p>
    <code>buoy scan</code> works with zero configuration. It auto-detects your framework,
    styling approach, and source directory. Supported frameworks include React, Vue,
    Svelte, Angular, and vanilla HTML/CSS.
  </p>

  <p>
    To override auto-detection, use the <code>-s</code> flag or configure
    <code>source</code> in your <code>.buoy.yaml</code>.
  </p>

  <h2>Workflow</h2>

  <ol>
    <li>Run <code>buoy scan</code> to analyze your codebase</li>
    <li>Review results with <code>buoy show drift</code></li>
    <li>Fix issues with <code>buoy fix</code></li>
    <li>Re-scan to verify improvements</li>
  </ol>

  <h2>Related</h2>

  <ul>
    <li><a href="/docs/cli/show">buoy show</a> — View scan results in detail</li>
    <li><a href="/docs/cli/drift">buoy drift</a> — Drift detection</li>
    <li><a href="/docs/cli/check">buoy check</a> — CI/CD integration</li>
    <li><a href="/docs/cli/history">buoy history</a> — Scan history and trends</li>
  </ul>
</DocsLayout>
