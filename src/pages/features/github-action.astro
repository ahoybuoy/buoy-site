---
import FeatureLayout from '../../layouts/FeatureLayout.astro'
import FeatureCard from '../../components/FeatureCard.astro'
import LeadMagnetCallout from '../../components/LeadMagnetCallout.astro'

const features = [
  {
    title: 'One-Click Install',
    description: 'Install from the GitHub Marketplace. No workflow files, no configuration, no API keys.'
  },
  {
    title: 'PR Reviews',
    description: 'Automatic drift reviews posted on every pull request with a deterministic issues table.'
  },
  {
    title: 'Inline Suggestions',
    description: 'Committable inline fix suggestions you can apply with one click in the GitHub UI (Pro).'
  },
  {
    title: 'Check Runs',
    description: 'Pass or fail based on drift severity. Block merges on critical drift.'
  },
  {
    title: 'Builder Mode',
    description: 'Coaching tone for early-stage design systems. Helps teams build tokens from repeated patterns.'
  },
  {
    title: 'Same Scanner',
    description: 'Runs the same open-source scanner engine as the CLI. Same detection, same accuracy.'
  },
]

const relatedFeatures = [
  {
    title: 'CI Integration',
    description: 'CLI-based CI for any pipeline',
    href: '/features/ci'
  },
  {
    title: 'Drift Detection',
    description: 'What the scanner catches',
    href: '/features/drift-detection'
  },
  {
    title: 'GitHub Integration',
    description: 'Full GitHub integration overview',
    href: '/integrations/github'
  },
]
---

<FeatureLayout
  title="Buoy GitHub App - Design Drift on Every PR | Buoy"
  description="Install the Buoy GitHub App for automatic design drift reviews on every pull request. Committable inline fix suggestions. No configuration needed."
  keywords="github app design system, design system pr checks, design drift github"
  heroTitle="Catch design drift in every PR"
  heroDescription="Install the GitHub App. Get drift reviews on every pull request. No workflow files, no API keys."
>
  <!-- One Scanner Badge -->
  <div slot="hero-extra" class="flex justify-center mt-8">
    <div class="inline-flex items-center gap-3 px-5 py-3 bg-navy border border-buoy/30 rounded-xl">
      <div class="flex items-center gap-2">
        <span class="text-buoy text-lg">ðŸ›Ÿ</span>
        <span class="text-buoy font-semibold">Same scanner as the CLI</span>
      </div>
      <span class="text-slate-dark">|</span>
      <span class="text-slate text-sm">Deterministic scanning + AI summaries &amp; coaching</span>
    </div>
  </div>

  <!-- Quick Setup -->
  <section class="py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Setup in 30 Seconds</h2>

      <div class="max-w-2xl mx-auto">
        <div class="space-y-6">
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-full bg-buoy/20 border-2 border-buoy flex items-center justify-center text-buoy font-bold shrink-0">1</div>
            <div>
              <h3 class="font-semibold text-light">Install from GitHub Marketplace</h3>
              <p class="text-sm text-slate mt-1">Visit <a href="https://github.com/marketplace/buoy-design" class="text-buoy hover:underline">github.com/marketplace/buoy-design</a> and install the app.</p>
            </div>
          </div>
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-full bg-buoy/20 border-2 border-buoy flex items-center justify-center text-buoy font-bold shrink-0">2</div>
            <div>
              <h3 class="font-semibold text-light">Select your repositories</h3>
              <p class="text-sm text-slate mt-1">Choose which repos Buoy should monitor.</p>
            </div>
          </div>
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-full bg-buoy/20 border-2 border-buoy flex items-center justify-center text-buoy font-bold shrink-0">3</div>
            <div>
              <h3 class="font-semibold text-light">Open a PR</h3>
              <p class="text-sm text-slate mt-1">Buoy scans automatically and posts a design review.</p>
            </div>
          </div>
        </div>
      </div>

      <p class="text-center text-slate mt-8">
        That's it. No workflow files. No API keys. No configuration needed.
      </p>
    </div>
  </section>

  <!-- PR Review Preview -->
  <section class="py-16 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">What You'll See</h2>

      <div class="bg-[#0d1117] border border-[#30363d] rounded-lg overflow-hidden shadow-xl">
        <div class="px-4 py-3 border-b border-[#30363d] flex items-center gap-2">
          <div class="w-8 h-8 rounded-full bg-buoy/20 flex items-center justify-center text-sm">ðŸ›Ÿ</div>
          <div>
            <span class="text-sm text-[#c9d1d9] font-medium">buoy-design[bot]</span>
            <span class="text-xs text-[#8b949e] ml-2">reviewed just now</span>
          </div>
        </div>
        <div class="p-4">
          <h3 class="text-[#c9d1d9] font-semibold mb-3">ðŸ›Ÿ Buoy Design Review</h3>
          <p class="text-[#8b949e] text-sm mb-4">3 design drift issues found in this PR.</p>
          <details class="mb-4" open>
            <summary class="text-[#58a6ff] text-sm cursor-pointer mb-2">Issues Table</summary>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="text-[#8b949e] border-b border-[#30363d]">
                    <th class="text-left py-2 px-3">File</th>
                    <th class="text-left py-2 px-3">Line</th>
                    <th class="text-left py-2 px-3">Issue</th>
                    <th class="text-left py-2 px-3">Fix</th>
                  </tr>
                </thead>
                <tbody class="text-[#c9d1d9]">
                  <tr class="border-b border-[#30363d]">
                    <td class="py-2 px-3 text-[#58a6ff]">Card.tsx</td>
                    <td class="py-2 px-3">12</td>
                    <td class="py-2 px-3">Hardcoded color <code class="text-[#f85149]">#3b82f6</code></td>
                    <td class="py-2 px-3"><code class="text-[#7ee787]">var(--color-primary)</code></td>
                  </tr>
                  <tr class="border-b border-[#30363d]">
                    <td class="py-2 px-3 text-[#58a6ff]">Card.tsx</td>
                    <td class="py-2 px-3">31</td>
                    <td class="py-2 px-3">Hardcoded spacing <code class="text-[#f85149]">24px</code></td>
                    <td class="py-2 px-3"><code class="text-[#7ee787]">var(--spacing-lg)</code></td>
                  </tr>
                  <tr>
                    <td class="py-2 px-3 text-[#58a6ff]">Modal.tsx</td>
                    <td class="py-2 px-3">8</td>
                    <td class="py-2 px-3">Hardcoded radius <code class="text-[#d29922]">8px</code></td>
                    <td class="py-2 px-3"><code class="text-[#7ee787]">var(--radius-md)</code></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </details>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Why Teams Love It</h2>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {features.map((feature) => (
          <div class="bg-navy/50 border border-navy-light/20 rounded-xl p-6">
            <h3 class="font-semibold text-light mb-2">{feature.title}</h3>
            <p class="text-sm text-slate">{feature.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Lead Magnet -->
  <section class="py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <LeadMagnetCallout
        leadMagnet="pr-review-cheatsheet"
        headline="Never miss drift in code review again"
        subhead="A quick-reference cheat sheet for catching design system issues in PRs. Print it, pin it, use it."
        buttonText="Get the Cheat Sheet"
      />
    </div>
  </section>

  <!-- Related Features -->
  <div slot="related" class="grid sm:grid-cols-3 gap-6 max-w-4xl mx-auto">
    {relatedFeatures.map((feature) => (
      <FeatureCard
        title={feature.title}
        description={feature.description}
        href={feature.href}
      />
    ))}
  </div>
</FeatureLayout>
